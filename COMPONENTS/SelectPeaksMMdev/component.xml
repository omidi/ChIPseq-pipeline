<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<component>
    <name>SelectPeaksMMdev</name>
    <!--<version>1.0</version>-->
    <doc>
    This component selects peaks by taking into account:
        -Z-score
        -length of peak at half height
        -fit to a Gaussian
    </doc>
    <author email="severin.berger@stud.unibas.ch">Severin</author>
    <launcher type="python">
        <argument name="file" value="SelectPeaksMMdev.py" />
    </launcher>
    <requires>URL="http://www.python.org/not" type="manual">python</requires>
    <inputs>
        <input name="in_dir" type="BinaryFolder">
            <doc>Output directory of RegionCoverage. Contains top files with bp coverage per region.</doc>
        </input>
    </inputs>
    <outputs>
        <output name="peakscores" type="BinaryFile">
            <doc>File containig the scores of topPeaks peaks (Z-score and RMSD to Gaussian)</doc>
        </output>
        <output name="allpeaks" type="BinaryFile">
            <doc>File containig the scores of all peaks (Z-score and RMSD to Gaussian)</doc>
        </output>
        <output name="peak_plots" type="BinaryFolder">
            <doc>Plots of coverage profile with fitted mixture model and chosen windows/peaks.</doc>
        </output>
        <output name="out_dir" type="BinaryFolder">
            <doc>Contains coverage files of the peaks that passed the filtering.</doc>
        </output>
        <output name="bad_dir" type="BinaryFolder">
            <doc>Contains coverage files of the peaks that did not pass the filtering (length and RMSD).</doc>
        </output>
        <output name="log_file" type="BinaryFile">
            <doc>Log file.</doc>
        </output>
        <output name="intermediate" type="BinaryFolder">
            <doc>Directory for output mainly plots.</doc>
        </output>
    </outputs>
    <parameters>
        <parameter name="FGfiles_string" type="string" default="">
            <doc>Used to find the fragment length log_file. Fragment length is used to find reasonable cut-offs on peak lengths.</doc>
        </parameter>
        <parameter name="FragmentLength" type="int" default="-1">
            <doc>This is used for cut-off on length of peaks. All peaks longer than 2 times fragment length get discarded. If this value is negative, fragment length is read from FGfiles_string.</doc>
        </parameter>
        <parameter name="files_per_job" type="int" default="10">
            <doc>Number of coverage profile ran per job.</doc>
        </parameter>
        <parameter name="topPeaks" type="int" default="1000">
            <doc>Number of heighest peaks to give out.</doc>
        </parameter>
        <parameter name="order" type="int" default="4">
            <doc>Number of Gaussians used for the mixture model. Mixture consists of 1 uniform and order Gaussians.</doc>
        </parameter>
        <parameter name="project_leader" type="string" default="project_nimwegen">
            <doc>Used for queue submission.</doc>
        </parameter>
    </parameters>
</component>
